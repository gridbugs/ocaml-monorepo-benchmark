diff --git a/dune b/dune
index 0040c07..6f3b238 100644
--- a/dune
+++ b/dune
@@ -1,8 +1,9 @@
 (library
  (name        hacl_star)
  (public_name hacl-star)
- (libraries hacl-star-raw
-            zarith)
+ (libraries zarith
+            ctypes
+            ctypes.stubs)
  (preprocessor_deps config.h)
  (preprocess (action (run %{bin:cppo} %{input-file})))
  (flags (:standard -warn-error -3)))
@@ -11,6 +12,189 @@
  (package hacl-star)
   (mld_files index))
 
-(rule (targets config.h) (deps)
+(rule (targets config.h) (deps raw/config.h)
  (action
-  (bash "cp $(ocamlfind query hacl-star-raw)/config.h .")))
+  (bash "cp raw/config.h .")))
+
+(rule
+ (targets
+  EverCrypt_AEAD_bindings.ml
+  EverCrypt_AEAD_stubs.ml
+  EverCrypt_AutoConfig2_bindings.ml
+  EverCrypt_AutoConfig2_stubs.ml
+  EverCrypt_CTR_bindings.ml
+  EverCrypt_CTR_stubs.ml
+  EverCrypt_Chacha20Poly1305_bindings.ml
+  EverCrypt_Chacha20Poly1305_stubs.ml
+  EverCrypt_Cipher_bindings.ml
+  EverCrypt_Cipher_stubs.ml
+  EverCrypt_Curve25519_bindings.ml
+  EverCrypt_Curve25519_stubs.ml
+  EverCrypt_DRBG_bindings.ml
+  EverCrypt_DRBG_stubs.ml
+  EverCrypt_Ed25519_bindings.ml
+  EverCrypt_Ed25519_stubs.ml
+  EverCrypt_Error_bindings.ml
+  EverCrypt_Error_stubs.ml
+  EverCrypt_HKDF_bindings.ml
+  EverCrypt_HKDF_stubs.ml
+  EverCrypt_HMAC_bindings.ml
+  EverCrypt_HMAC_stubs.ml
+  EverCrypt_Hash_bindings.ml
+  EverCrypt_Hash_stubs.ml
+  EverCrypt_Poly1305_bindings.ml
+  EverCrypt_Poly1305_stubs.ml
+  EverCrypt_StaticConfig_bindings.ml
+  EverCrypt_StaticConfig_stubs.ml
+  EverCrypt_Vale_bindings.ml
+  EverCrypt_Vale_stubs.ml
+  Hacl_Bignum25519_51_bindings.ml
+  Hacl_Bignum25519_51_stubs.ml
+  Hacl_Bignum256_32_bindings.ml
+  Hacl_Bignum256_32_stubs.ml
+  Hacl_Bignum256_bindings.ml
+  Hacl_Bignum256_stubs.ml
+  Hacl_Bignum32_bindings.ml
+  Hacl_Bignum32_stubs.ml
+  Hacl_Bignum4096_32_bindings.ml
+  Hacl_Bignum4096_32_stubs.ml
+  Hacl_Bignum4096_bindings.ml
+  Hacl_Bignum4096_stubs.ml
+  Hacl_Bignum64_bindings.ml
+  Hacl_Bignum64_stubs.ml
+  Hacl_Bignum_Base_bindings.ml
+  Hacl_Bignum_Base_stubs.ml
+  Hacl_Bignum_bindings.ml
+  Hacl_Bignum_stubs.ml
+  Hacl_Chacha20Poly1305_128_bindings.ml
+  Hacl_Chacha20Poly1305_128_stubs.ml
+  Hacl_Chacha20Poly1305_256_bindings.ml
+  Hacl_Chacha20Poly1305_256_stubs.ml
+  Hacl_Chacha20Poly1305_32_bindings.ml
+  Hacl_Chacha20Poly1305_32_stubs.ml
+  Hacl_Chacha20_Vec128_bindings.ml
+  Hacl_Chacha20_Vec128_stubs.ml
+  Hacl_Chacha20_Vec256_bindings.ml
+  Hacl_Chacha20_Vec256_stubs.ml
+  Hacl_Chacha20_Vec32_bindings.ml
+  Hacl_Chacha20_Vec32_stubs.ml
+  Hacl_Chacha20_bindings.ml
+  Hacl_Chacha20_stubs.ml
+  Hacl_Curve25519_51_bindings.ml
+  Hacl_Curve25519_51_stubs.ml
+  Hacl_Curve25519_64_Slow_bindings.ml
+  Hacl_Curve25519_64_Slow_stubs.ml
+  Hacl_Curve25519_64_bindings.ml
+  Hacl_Curve25519_64_stubs.ml
+  Hacl_EC_Ed25519_bindings.ml
+  Hacl_EC_Ed25519_stubs.ml
+  Hacl_Ed25519_bindings.ml
+  Hacl_Ed25519_stubs.ml
+  Hacl_FFDHE_bindings.ml
+  Hacl_FFDHE_stubs.ml
+  Hacl_Frodo1344_bindings.ml
+  Hacl_Frodo1344_stubs.ml
+  Hacl_Frodo640_bindings.ml
+  Hacl_Frodo640_stubs.ml
+  Hacl_Frodo64_bindings.ml
+  Hacl_Frodo64_stubs.ml
+  Hacl_Frodo976_bindings.ml
+  Hacl_Frodo976_stubs.ml
+  Hacl_Frodo_KEM_bindings.ml
+  Hacl_Frodo_KEM_stubs.ml
+  Hacl_GenericField32_bindings.ml
+  Hacl_GenericField32_stubs.ml
+  Hacl_GenericField64_bindings.ml
+  Hacl_GenericField64_stubs.ml
+  Hacl_HKDF_Blake2b_256_bindings.ml
+  Hacl_HKDF_Blake2b_256_stubs.ml
+  Hacl_HKDF_Blake2s_128_bindings.ml
+  Hacl_HKDF_Blake2s_128_stubs.ml
+  Hacl_HKDF_bindings.ml
+  Hacl_HKDF_stubs.ml
+  Hacl_HMAC_Blake2b_256_bindings.ml
+  Hacl_HMAC_Blake2b_256_stubs.ml
+  Hacl_HMAC_Blake2s_128_bindings.ml
+  Hacl_HMAC_Blake2s_128_stubs.ml
+  Hacl_HMAC_DRBG_bindings.ml
+  Hacl_HMAC_DRBG_stubs.ml
+  Hacl_HMAC_bindings.ml
+  Hacl_HMAC_stubs.ml
+  Hacl_HPKE_Curve51_CP128_SHA256_bindings.ml
+  Hacl_HPKE_Curve51_CP128_SHA256_stubs.ml
+  Hacl_HPKE_Curve51_CP128_SHA512_bindings.ml
+  Hacl_HPKE_Curve51_CP128_SHA512_stubs.ml
+  Hacl_HPKE_Curve51_CP256_SHA256_bindings.ml
+  Hacl_HPKE_Curve51_CP256_SHA256_stubs.ml
+  Hacl_HPKE_Curve51_CP256_SHA512_bindings.ml
+  Hacl_HPKE_Curve51_CP256_SHA512_stubs.ml
+  Hacl_HPKE_Curve51_CP32_SHA256_bindings.ml
+  Hacl_HPKE_Curve51_CP32_SHA256_stubs.ml
+  Hacl_HPKE_Curve51_CP32_SHA512_bindings.ml
+  Hacl_HPKE_Curve51_CP32_SHA512_stubs.ml
+  Hacl_HPKE_Curve64_CP128_SHA256_bindings.ml
+  Hacl_HPKE_Curve64_CP128_SHA256_stubs.ml
+  Hacl_HPKE_Curve64_CP128_SHA512_bindings.ml
+  Hacl_HPKE_Curve64_CP128_SHA512_stubs.ml
+  Hacl_HPKE_Curve64_CP256_SHA256_bindings.ml
+  Hacl_HPKE_Curve64_CP256_SHA256_stubs.ml
+  Hacl_HPKE_Curve64_CP256_SHA512_bindings.ml
+  Hacl_HPKE_Curve64_CP256_SHA512_stubs.ml
+  Hacl_HPKE_Curve64_CP32_SHA256_bindings.ml
+  Hacl_HPKE_Curve64_CP32_SHA256_stubs.ml
+  Hacl_HPKE_Curve64_CP32_SHA512_bindings.ml
+  Hacl_HPKE_Curve64_CP32_SHA512_stubs.ml
+  Hacl_HPKE_P256_CP128_SHA256_bindings.ml
+  Hacl_HPKE_P256_CP128_SHA256_stubs.ml
+  Hacl_HPKE_P256_CP256_SHA256_bindings.ml
+  Hacl_HPKE_P256_CP256_SHA256_stubs.ml
+  Hacl_HPKE_P256_CP32_SHA256_bindings.ml
+  Hacl_HPKE_P256_CP32_SHA256_stubs.ml
+  Hacl_Hash_Base_bindings.ml
+  Hacl_Hash_Base_stubs.ml
+  Hacl_Hash_Blake2_bindings.ml
+  Hacl_Hash_Blake2_stubs.ml
+  Hacl_Hash_Blake2b_256_bindings.ml
+  Hacl_Hash_Blake2b_256_stubs.ml
+  Hacl_Hash_Blake2s_128_bindings.ml
+  Hacl_Hash_Blake2s_128_stubs.ml
+  Hacl_Hash_MD5_bindings.ml
+  Hacl_Hash_MD5_stubs.ml
+  Hacl_Hash_SHA1_bindings.ml
+  Hacl_Hash_SHA1_stubs.ml
+  Hacl_Hash_SHA2_bindings.ml
+  Hacl_Hash_SHA2_stubs.ml
+  Hacl_IntTypes_Intrinsics_bindings.ml
+  Hacl_IntTypes_Intrinsics_stubs.ml
+  Hacl_NaCl_bindings.ml
+  Hacl_NaCl_stubs.ml
+  Hacl_P256_bindings.ml
+  Hacl_P256_stubs.ml
+  Hacl_Poly1305_128_bindings.ml
+  Hacl_Poly1305_128_stubs.ml
+  Hacl_Poly1305_256_bindings.ml
+  Hacl_Poly1305_256_stubs.ml
+  Hacl_Poly1305_32_bindings.ml
+  Hacl_Poly1305_32_stubs.ml
+  Hacl_RSAPSS_bindings.ml
+  Hacl_RSAPSS_stubs.ml
+  Hacl_SHA3_bindings.ml
+  Hacl_SHA3_stubs.ml
+  Hacl_Salsa20_bindings.ml
+  Hacl_Salsa20_stubs.ml
+  Hacl_Spec_bindings.ml
+  Hacl_Spec_stubs.ml
+  Hacl_Streaming_Blake2_bindings.ml
+  Hacl_Streaming_Blake2_stubs.ml
+  Hacl_Streaming_MD5_bindings.ml
+  Hacl_Streaming_MD5_stubs.ml
+  Hacl_Streaming_Poly1305_32_bindings.ml
+  Hacl_Streaming_Poly1305_32_stubs.ml
+  Hacl_Streaming_SHA1_bindings.ml
+  Hacl_Streaming_SHA1_stubs.ml
+  Hacl_Streaming_SHA2_bindings.ml
+  Hacl_Streaming_SHA2_stubs.ml
+  Lib_RandomBuffer_System_bindings.ml
+  Lib_RandomBuffer_System_stubs.ml)
+ (deps (source_tree raw/lib))
+ (action (bash "cp raw/lib/* .")))
